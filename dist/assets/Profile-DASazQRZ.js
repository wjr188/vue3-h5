import{d as J,u as G,y as H,J as K,L as O,r as l,o as W,k as X,n as Y,M,c as r,a as c,b as s,m as d,i as n,t as i,x as a,F as x,e as $,l as g,P as Z}from"./index-CKjozqaQ.js";/* empty css              */import{T as ss}from"./TabBar-BmLwAtYY.js";import{f as os,Q as es}from"./popupConfig.api-BCyShdpO.js";import{B as ts}from"./index-BvDqeyKw.js";import{_ as is}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ns=""+new URL("../icons/setting4.svg",import.meta.url).href,ls=""+new URL("../icons/crown.svg",import.meta.url).href,as=""+new URL("../icons/gold-medal.svg",import.meta.url).href,rs={class:"scroll-wrapper"},cs={class:"mine-page"},ds={class:"user-info-box"},us=["src"],ps={class:"user-meta"},vs={class:"user-name"},_s={class:"user-desc"},bs={key:0,class:"banner-scale-outer"},gs={class:"banner-scale-inner"},ms={class:"vip-cyber-left"},hs={class:"vip-cyber-expire"},fs={class:"vip-expire-badge"},ws={class:"big-cyber-badge"},ys={class:"badge-text-overlay"},ks={class:"card-row"},Cs=["onClick"],xs={class:"icon-glow-wrapper"},$s=["src"],Ps={class:"title"},Ss={class:"desc"},Ts={class:"block card-wrapper"},Us={class:"grid"},Is=["onClick"],Vs={class:"icon-box"},Bs=["src"],Ls={class:"label"},Ns={class:"block card-wrapper"},Rs={class:"grid"},Ms=["onClick"],Es={class:"icon-box"},qs=["src"],zs={class:"label"},As={class:"popup-content-wrapper"},Ds={class:"popup-box updated-style"},Fs={class:"popup-header-center brand-header"},Qs=["src"],js={class:"brand-texts"},Js={class:"brand-title"},Gs={class:"brand-subtitle"},Hs={class:"popup-qr-info-row"},Ks={class:"popup-info-text"},Os={class:"info-item"},Ws={class:"highlight"},Xs={class:"info-item"},Ys={class:"highlight"},Zs={class:"info-item"},so={class:"highlight"},oo={class:"popup-row"},eo={class:"row-value"},to={class:"copy-btn-container"},io={class:"popup-row"},no={class:"row-value"},lo={class:"copy-btn-container"},ao=J({__name:"Profile",setup(ro){const p=G(),E=H(),m=K(),{uuid:v,nickname:P,avatar:q,inviteCode:_,isVIP:S,vipCardName:h,vipExpireTime:T}=O(m),f=l(!1),w=l(!1),U=l(""),I=l(""),V=l(""),y=l(""),k=l(""),b=l("");W(async()=>{m.token&&await m.fetchUserInfo();try{const e=await os("mine");if(console.log("弹窗配置返回:",e),e?.length>0){const o=e[0].value;U.value=o.logo_url||"",I.value=o.title||"",V.value=o.subtitle||"",y.value=o.url||"",k.value=o.email||"",o.domain?o.domain.includes("?")?b.value=`${o.domain}&uid=${v.value}&invite=${_.value}`:b.value=`${o.domain}?uid=${v.value}&invite=${_.value}`:b.value=`https://holly5suinikan01.com/?uid=${v.value}&invite=${_.value}`}}catch(e){console.error("弹窗配置请求失败:",e)}E.name==="Profile"&&!sessionStorage.getItem("hasShownMinePopup")&&(f.value=!0,sessionStorage.setItem("hasShownMinePopup","1")),window.addEventListener("beforeunload",()=>{sessionStorage.removeItem("hasShownMinePopup")})});const z=()=>p.push("/setting"),B=()=>p.push("/vip"),A=e=>{e.route&&p.push(e.route)},L=e=>{e.label==="App下载"?window.open("https://holly5suinikan01.com","_blank"):e.route&&p.push(e.route)},N=async e=>{await navigator.clipboard.writeText(e),M({message:"复制成功",className:"toast-override",duration:600})};X(w,e=>{e&&Y(()=>{M({message:"请自行截图保存分享二维码~",className:"toast-override",duration:1e3}),w.value=!1})});const D=[{icon:"/icons/gold.svg",title:"金币充值",desc:"金额：0.00",route:"/vip?tab=coin"},{icon:"/icons/share.svg",title:"分享邀请",desc:"邀请领红包",route:"/promotion-share"},{icon:"/icons/promo.svg",title:"代理推广",desc:"全网最高分成"}],F=[{icon:"/icons/order.svg",label:"我的订单",route:"/order-record"},{icon:"/icons/shop.svg",label:"我的购买",route:"/my-purchase"},{icon:"/icons/fav.svg",label:"我的收藏",route:"/my-favorites"},{icon:"/icons/support.svg",label:"在线客服",route:"/online-service"}],Q=[{icon:"/icons/history.svg",label:"浏览记录",route:"/browse-history"},{icon:"/icons/request.svg",label:"App下载"},{icon:"/icons/group.svg",label:"官方群",route:"/group-join"},{icon:"/icons/invite.svg",label:"填写邀请码",route:"/invite-code"},{icon:"/icons/code.svg",label:"福利任务",route:"/benefit-page"},{icon:"/icons/app.svg",label:"应用推荐",route:"/benefit-page?tab=recommend"}];return(e,o)=>{const C=ts,j=Z;return c(),r("div",rs,[s("div",cs,[s("div",{class:"header-actions"},[s("img",{src:ns,class:"action-icon",alt:"设置",onClick:z})]),s("div",ds,[s("img",{class:"user-avatar",src:n(q)},null,8,us),s("div",ps,[s("div",vs,i(n(P)),1),s("div",_s,i(n(S)?`尊贵的${n(h)?n(h)+"会员":"会员"}👑`:"成为会员即可无限观影"),1)])]),n(S)?(c(),r("div",bs,[s("div",gs,[s("div",{class:"vip-banner-cyber",onClick:B},[s("div",ms,[o[5]||(o[5]=s("div",{class:"vip-cyber-title"},[a(" 您当前的会员类型是 "),s("img",{src:ls,class:"vip-cyber-crown"})],-1)),s("div",hs,[o[4]||(o[4]=a(" 到期时间： ")),s("span",fs,i(n(T)==="永久"?"永久":n(T)||"未知"),1)])]),s("div",ws,[o[6]||(o[6]=s("img",{src:as,class:"badge-bg-icon",alt:"徽章"},null,-1)),s("div",ys,i(n(h)||"会员"),1)])])])])):(c(),r("div",{key:1,class:"vip-banner",onClick:B},o[7]||(o[7]=[s("div",{class:"banner-title"},"会员中心 限时特惠",-1),s("button",{class:"banner-btn"},"立即开通",-1)]))),s("div",ks,[(c(),r(x,null,$(D,(t,u)=>s("div",{class:"card-box",key:u,onClick:R=>A(t)},[s("div",xs,[s("img",{src:t.icon,class:"icon"},null,8,$s)]),s("div",Ps,i(t.title),1),s("div",Ss,i(t.desc),1)],8,Cs)),64))]),s("div",Ts,[o[8]||(o[8]=s("div",{class:"block-title"},"常用功能",-1)),s("div",Us,[(c(),r(x,null,$(F,(t,u)=>s("div",{class:"grid-item",key:u,onClick:R=>L(t)},[s("div",Vs,[s("img",{src:t.icon},null,8,Bs)]),s("div",Ls,i(t.label),1)],8,Is)),64))])]),s("div",Ns,[o[9]||(o[9]=s("div",{class:"block-title"},"用户服务",-1)),s("div",Rs,[(c(),r(x,null,$(Q,(t,u)=>s("div",{class:"grid-item",key:u,onClick:R=>L(t)},[s("div",Es,[s("img",{src:t.icon},null,8,qs)]),s("div",zs,i(t.label),1)],8,Ms)),64))])]),d(ss),d(j,{show:f.value,"onUpdate:show":o[3]||(o[3]=t=>f.value=t),round:"",class:"popup-container","overlay-style":{backgroundColor:"rgba(0, 0, 0, 0.5)"}},{default:g(()=>[s("div",As,[s("div",Ds,[s("div",Fs,[s("img",{src:U.value,class:"brand-avatar"},null,8,Qs),s("div",js,[s("div",Js,i(I.value),1),s("div",Gs,i(V.value),1)])]),s("div",Hs,[d(es,{value:b.value,size:110},null,8,["value"]),s("div",Ks,[o[13]||(o[13]=s("div",{class:"info-title"},"我的账号信息",-1)),s("div",Os,[o[10]||(o[10]=a("用户昵称：")),s("span",Ws,i(n(P)),1)]),s("div",Xs,[o[11]||(o[11]=a("用户ID：")),s("span",Ys,i(n(v)),1)]),s("div",Zs,[o[12]||(o[12]=a("邀请码：")),s("span",so,i(n(_)),1)])])]),s("div",oo,[o[15]||(o[15]=s("span",{class:"row-label"},"官方网址：",-1)),s("span",eo,i(y.value),1),s("div",to,[d(C,{class:"copy-btn",size:"small",type:"primary",plain:"",hairline:"",onClick:o[0]||(o[0]=t=>N(y.value))},{default:g(()=>o[14]||(o[14]=[a("复制")])),_:1,__:[14]})])]),s("div",io,[o[17]||(o[17]=s("span",{class:"row-label"},"官方邮箱：",-1)),s("span",no,i(k.value),1),s("div",lo,[d(C,{class:"copy-btn",size:"small",type:"primary",plain:"",hairline:"",onClick:o[1]||(o[1]=t=>N(k.value))},{default:g(()=>o[16]||(o[16]=[a("复制")])),_:1,__:[16]})])]),o[18]||(o[18]=s("div",{class:"popup-tip-highlight"}," 发送任意信息到官方邮箱，即可获得最新地址!!! ",-1)),o[19]||(o[19]=s("ul",{class:"popup-tips"},[s("li",null,"请您保存二维码凭证，以便找回您的账号"),s("li",null,"请妥善保管此账号凭证，不要随意透露给任何人"),s("li",null,"若账号不慎丢失，可通过此凭证找回")],-1))]),d(C,{class:"save-button-upgraded",round:"",block:"",type:"primary",onClick:o[2]||(o[2]=t=>w.value=!0)},{default:g(()=>o[20]||(o[20]=[a(" 立即保存 ")])),_:1,__:[20]})])]),_:1},8,["show"])])])}}}),go=is(ao,[["__scopeId","data-v-8c9d19da"]]);export{go as default};
