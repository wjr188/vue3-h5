import{d as A,u as J,r as y,k as E,n as X,o as P,q as G,C as O,c as m,a as g,b as e,m as Q,F as B,e as z,f as Y,v as D,h as N,D as Z,t as d,z as V,s as K,x as b,y as ee,g as te,i as x}from"./index-CKjozqaQ.js";import{_ as se,a as oe,S as ae}from"./NoticeBar-C-J3-lUL.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as q}from"./play4-3PhygbDH.js";import{_ as ne}from"./loading-DSJ59oo9.js";import{u as ie}from"./useLazyLoad-CfEeBfCV.js";const le=""+new URL("../icons/app.svg",import.meta.url).href,re={class:"nav-container"},ce=["onClick"],de=["src"],ue={class:"sub-row"},ve={class:"search-bar"},me={key:0,class:"placeholder"},ge=A({__name:"TopNavBar",props:{categories:{},activeCategory:{},darkMode:{type:Boolean}},emits:["categoryChange"],setup(C,{emit:$}){const u=C,_=$,f=J(),r=y(0),h=y([]),p=y(!1),i=y(null);function l(s,t){r.value=s,T(s),_("categoryChange",t)}function k(s){const t=u.categories.findIndex(o=>o.name===s);t!==-1&&l(t,s)}function c(){f.push("/search-popup")}function I(){f.push("/vip")}function w(){f.push("/all-categories")}function T(s){const t=h.value[s],o=i.value;if(t&&o){const v=o.getBoundingClientRect(),a=t.getBoundingClientRect(),U=t.offsetLeft-o.offsetLeft-v.width/2+a.width/2;o.scrollTo({left:U,behavior:"smooth"})}}E(()=>u.activeCategory,s=>{const t=u.categories.findIndex(o=>o.name===s);t>=0&&t!==r.value&&(r.value=t,X(()=>T(t)))});let R=0;P(()=>{if(u.activeCategory){const t=u.categories.findIndex(o=>o.name===u.activeCategory);t>=0&&(r.value=t,X(()=>T(t)))}const s=document.querySelector(".top-bar");s.addEventListener("touchstart",t=>{R=t.touches[0].clientX},{passive:!0}),s.addEventListener("touchend",t=>{const v=t.changedTouches[0].clientX-R;Math.abs(v)<12||t.target.closest(".nav-row")||t.target.closest(".sub-row")||(v<-12&&r.value<u.categories.length-1?l(r.value+1,u.categories[r.value+1].name):v>12&&r.value>0&&l(r.value-1,u.categories[r.value-1].name))},{passive:!0})});const F=G(()=>{const s=h.value[r.value];return s?{width:"5.33vw",height:"0.8vw",backgroundColor:"#f12c2c",borderRadius:"0.53vw",position:"absolute",bottom:"0",left:`${s.offsetLeft+s.offsetWidth/2-2.66}px`,transition:"left 0.3s ease"}:{width:"0"}}),S=["黑料·吃瓜·破解·流出","偷拍·学生·缅北·破处","母子·父女·换妻·孕妇","男同·女同·小萝莉·原神","兽父·重口·猎奇·迷奸"],L=y(0),M=y("");let n;return P(()=>{n=window.setInterval(()=>{L.value=(L.value+1)%S.length},3e3)}),O(()=>{n&&clearInterval(n)}),(s,t)=>(g(),m("div",{class:V(["top-bar",{"darknet-top-bar":s.darkMode}])},[e("div",re,[e("div",{class:"nav-row",ref_key:"navRow",ref:i},[(g(!0),m(B,null,z(s.categories,(o,v)=>(g(),m("div",{key:v,ref_for:!0,ref:a=>h.value[v]=a,class:V(["nav-item",{active:r.value===v}]),onClick:a=>l(v,o.name)},[e("span",null,d(o.name),1),o.icon?(g(),m("img",{key:0,src:o.icon,class:"icon"},null,8,de)):N("",!0)],10,ce))),128)),e("div",{class:"slider-bar",style:Y(F.value)},null,4)],512),e("div",{class:"nav-menu-btn",onClick:t[0]||(t[0]=o=>p.value=!0)},t[3]||(t[3]=[e("img",{src:se,alt:"菜单"},null,-1)]))]),e("div",ue,[e("div",ve,[D(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>M.value=o),readonly:"",onFocus:c},null,544),[[Z,M.value]]),M.value?N("",!0):(g(),m("div",me,d(S[L.value]),1)),t[4]||(t[4]=e("span",{class:"search-icon"},"🔍",-1))]),e("div",{class:"icon-btn",onClick:I},t[5]||(t[5]=[e("img",{src:oe,alt:"VIP"},null,-1)])),e("div",{class:"icon-btn",onClick:w},t[6]||(t[6]=[e("img",{src:le,alt:"导航"},null,-1)]))]),Q(ae,{visible:p.value,list:s.categories,active:s.categories[r.value]?.name,onClose:t[2]||(t[2]=o=>p.value=!1),onSelect:k},null,8,["visible","list","active"])],2))}}),nt=H(ge,[["__scopeId","data-v-9f9fb499"]]),W=""+new URL("../static/more1.png",import.meta.url).href,j=""+new URL("../static/refresh1.png",import.meta.url).href,pe={class:"block-title-row","data-stop-swipe":""},fe={class:"block-title"},_e={class:"cover-wrapper","data-stop-swipe":""},ye={class:"main-image",alt:"主图"},he={class:"meta"},ke={class:"views"},be={class:"duration"},we={class:"title"},Ce={class:"tag"},$e={class:"sub-images"},Ie=["onClick"],Te={class:"cover-wrapper"},Se={class:"sub-image",alt:"子图"},Le={class:"meta"},Me={class:"views"},Re={class:"duration"},Be={class:"title"},ze={class:"tag"},De=A({__name:"CategoryBlock",props:{category:{},dark:{type:Boolean}},emits:["clickItem","goToMore"],setup(C,{emit:$}){const u=$,_=C,f=y([..._.category.subImages]);function r(){f.value=[..._.category.subImages].map(i=>({...i})).sort(()=>Math.random()-.5)}E(()=>_.category.subImages,()=>r(),{immediate:!0});function h(i,l,k,c){u("clickItem",{cover:i,title:l,tag:k,src:c})}function p(){u("goToMore",_.category.name)}return(i,l)=>{const k=K("lazy");return g(),m("div",{class:V(["category-block",{"dark-mode":_.dark}]),"data-stop-swipe":""},[e("div",pe,[e("div",fe,d(i.category.name),1),e("div",{class:"block-more",onClick:p,"data-stop-swipe":""},"➤")]),e("div",{class:"main-card",onClick:l[0]||(l[0]=c=>h(i.category.mainImage,i.category.mainTitle,i.category.mainTag,i.category.src)),"data-stop-swipe":""},[e("div",_e,[D(e("img",ye,null,512),[[k,i.category.mainImage]]),e("div",he,[e("div",ke,[l[1]||(l[1]=e("img",{src:q,class:"play-icon"},null,-1)),b(" "+d((i.category.mainViews/1e4).toFixed(1))+"w ",1)]),e("div",be,d(i.category.mainDuration||"00:00"),1)])]),e("div",we,d(i.category.mainTitle),1),e("div",Ce,d(i.category.mainTag),1)]),e("div",$e,[(g(!0),m(B,null,z(f.value,(c,I)=>(g(),m("div",{key:I,class:"sub-card",onClick:w=>h(c.cover,c.title,c.tag,c.src),"data-stop-swipe":""},[e("div",Te,[D(e("img",Se,null,512),[[k,c.cover]]),e("div",Le,[e("div",Me,[l[2]||(l[2]=e("img",{src:q,class:"play-icon"},null,-1)),b(" "+d((c.views/1e4).toFixed(1))+"w ",1)]),e("div",Re,d(c.duration||"00:00"),1)])]),e("div",Be,d(c.title),1),e("div",ze,d(c.tag),1)],8,Ie))),128))]),e("div",{class:"action-buttons","data-stop-swipe":""},[e("button",{class:"btn outline",onClick:p,"data-stop-swipe":""},l[3]||(l[3]=[e("img",{src:W,class:"btn-icon",alt:"更多",loading:"lazy"},null,-1),b(" 查看更多 ")])),e("button",{class:"btn outline",onClick:r,"data-stop-swipe":""},l[4]||(l[4]=[e("img",{src:j,class:"btn-icon",alt:"刷新",loading:"lazy"},null,-1),b(" 更换一批 ")]))])],2)}}}),it=H(De,[["__scopeId","data-v-c7433173"]]),Ne={class:"block-title-row"},Ve={class:"block-title"},Fe=["onClick"],Ue={class:"sub-images"},xe=["onClick"],Xe={class:"cover-wrapper"},qe={class:"sub-image"},Ae={class:"meta"},Ee={class:"views"},He={class:"duration"},Pe={class:"title"},Ge={class:"tag"},Ke={class:"action-buttons"},We=["onClick"],je=["onClick"],Je={key:0,class:"loading-tip"},Oe={key:1,class:"end-bar"},Qe=A({__name:"NormalCategory",props:{categoryList:{},categoryName:{},dark:{type:Boolean}},emits:["clickItem","goToMore"],setup(C,{emit:$}){const u=$,_=C,f=ee(),r=G(()=>_.dark===!0||f.meta.isDarknet===!0||f.path.includes("darknet")),h=y([]),p=y(null),{visibleList:i,isLoading:l,noMore:k,sentinel:c,loadUntil:I}=ie(h,{batchSize:2,namespace:"normal-category",uniqueProps:{page:`normal-category-${f.path}`}}),w=y({});function T(n,s){w.value[n]=[...s].map(t=>({...t})).sort(()=>Math.random()-.5).slice(0,6)}function R(n){const s={};for(const t of n)s[t.name]=[...t.subImages].map(o=>({...o})).sort(()=>Math.random()-.5).slice(0,6);w.value=s}E(()=>_.categoryList,n=>{!n||n.length===0||(h.value=n,R(n))},{immediate:!0});function F(n,s,t,o){u("clickItem",{cover:n,src:s,title:t,tag:o})}function S(n){u("goToMore",n)}const L=()=>`normal-category-scroll-${f.path}`;function M(){const n=sessionStorage.getItem(L());if(n&&p.value){let s=function(){if(!p.value)return;const a=p.value.scrollHeight;a!==v&&a>0&&(p.value.scrollTop=t,v=a),o++,o<20&&setTimeout(s,40)};const t=parseInt(n,10);let o=0,v=0;s()}}return te(async()=>{await I(0),await X(),M()}),(n,s)=>{const t=K("lazy");return g(),m("div",{class:V(["normal-category",{dark:r.value}]),ref_key:"scrollContainer",ref:p},[(g(!0),m(B,null,z(x(i),(o,v)=>(g(),m("div",{class:"category-block",key:v},[e("div",Ne,[e("div",Ve,d(o.name),1),e("div",{class:"block-more",onClick:a=>S(o.name)},"➤",8,Fe)]),e("div",Ue,[(g(!0),m(B,null,z(w.value[o.name],(a,U)=>(g(),m("div",{key:U,class:"sub-card",onClick:Ye=>F(a.cover,a.src,a.title,a.tag)},[e("div",Xe,[D(e("img",qe,null,512),[[t,a.cover]]),e("div",Ae,[e("div",Ee,[s[0]||(s[0]=e("img",{src:q,class:"play-icon"},null,-1)),b(" "+d(a.views?(a.views/1e4).toFixed(1):"0.0")+"w ",1)]),e("div",He,d(a.duration||"00:00"),1)])]),e("div",Pe,d(a.title),1),e("div",Ge,d(a.tag),1)],8,xe))),128))]),e("div",Ke,[e("button",{class:"btn outline",onClick:a=>S(o.name)},s[1]||(s[1]=[e("img",{src:W,class:"btn-icon"},null,-1),b(" 查看更多 ")]),8,We),e("button",{class:"btn outline",onClick:a=>T(o.name,o.subImages)},s[2]||(s[2]=[e("img",{src:j,class:"btn-icon"},null,-1),b(" 更换一批 ")]),8,je)])]))),128)),x(l)?(g(),m("div",Je,s[3]||(s[3]=[e("img",{src:ne,class:"spinner"},null,-1),e("div",{class:"loading-text"},"客官别走，妾身马上就好~",-1)]))):N("",!0),x(k)?(g(),m("div",Oe,"客官，妾身被你弄高潮了，扛不住了~")):N("",!0),e("div",{ref_key:"sentinel",ref:c,class:"load-more-trigger"},null,512)],2)}}}),lt=H(Qe,[["__scopeId","data-v-98eb6fec"]]);export{it as C,lt as N,nt as T};
