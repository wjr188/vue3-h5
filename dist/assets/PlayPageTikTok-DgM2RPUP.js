import{d as F,u as U,y as M,r as i,o as H,A as $,c,a,b as e,m as G,j as f,h as T,l as E,F as R,e as j,i as y,t as l,p as r}from"./index-CKjozqaQ.js";import{_ as J}from"./dynamic-import-helper-BheWnx7M.js";import{_ as K}from"./back1-BriTIMyR.js";import{N as Q,_ as W,V as X}from"./VideoProgress-CsCbmb85.js";import{a as Y,S as Z}from"./swiper.min-DhCtGxFp.js";import{u as tt}from"./useHistoryStore-DEf3NF2P.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hls-AJDOUA6Y.js";import"./function-call-Cn_FLeOo.js";import"./index-BvDqeyKw.js";const ot=""+new URL("../icons/like.svg",import.meta.url).href,st=""+new URL("../icons/fav1.svg",import.meta.url).href,rt={class:"tiktok-play-wrapper"},at={class:"video-page"},it=["src"],nt={class:"video-overlay"},lt={class:"nickname-line"},ct={class:"nickname"},ut={class:"title"},_t={class:"tags"},mt={class:"unlock"},dt={class:"video-actions"},pt={class:"action-item"},vt=["src"],kt={class:"count"},ft={class:"action-item"},yt={class:"count"},gt=F({__name:"PlayPageTikTok",setup(ht){const I=U(),g=M(),V=tt(),h=i(null),m=i(null),u=i([]),d=Number(g.query.index||0),w=g.query.category||"巨乳",n=i(d),_=i(!0),p=i(0),P=i(0),D={最新:"zui_xin",最热:"zui_re",巨乳:"ju_ru",美臀:"mei_tun",学生:"xue_sheng",女儿:"nv_er",乱伦:"luan_lun",白虎:"bai_hu",内射:"nei_she",调教:"tiao_jiao",网黄:"wang_huang"},L=async()=>{try{const t=await J(Object.assign({"../mock/tiktok/bai_hu.js":()=>r(()=>import("./bai_hu-BU1IN_nu.js"),[],import.meta.url),"../mock/tiktok/ju_ru.js":()=>r(()=>import("./ju_ru-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/luan_lun.js":()=>r(()=>import("./luan_lun-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/mei_tun.js":()=>r(()=>import("./mei_tun-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/nei_she.js":()=>r(()=>import("./nei_she-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/nv_er.js":()=>r(()=>import("./nv_er-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/tiao_jiao.js":()=>r(()=>import("./tiao_jiao-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/wang_huang.js":()=>r(()=>import("./wang_huang-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/xue_sheng.js":()=>r(()=>import("./xue_sheng-DX9ZIAEN.js"),[],import.meta.url),"../mock/tiktok/zui_re.js":()=>r(()=>import("./zui_re-C336kuBn.js"),[],import.meta.url),"../mock/tiktok/zui_xin.js":()=>r(()=>import("./zui_xin-DSCovyGQ.js"),[],import.meta.url)}),`../mock/tiktok/${D[w]}.js`,4);u.value=t.default||[]}catch(t){console.error("加载视频失败",t)}},S=t=>{n.value=t.realIndex,_.value=!1},b=t=>{h.value=t,requestAnimationFrame(()=>{typeof t.slideTo=="function"&&t.slideTo(d,0,!1)})},A=()=>{_.value=!0},O=({currentTime:t,duration:o})=>{p.value=Number(t),P.value=Number(o)},x=t=>{m.value?.seekTo&&(m.value.seekTo(t),_.value=!0)},N=t=>{p.value=t},B=(t,o)=>{t===n.value&&o&&(m.value=o)},C=()=>{I.go(-1)};H(()=>{L()}),$(()=>{document.body.style.overflow=""});const q=()=>{const t=u.value[n.value];t&&V.addRecord({id:String(t.id??t.src),type:"douyin",time:new Date().toISOString(),data:{title:t.title||"短视频",cover:t.cover||"",author:t.author||"",tags:t.tags||[]}})};return(t,o)=>(a(),c("div",rt,[e("div",{class:"back-button",onClick:C},o[0]||(o[0]=[e("img",{src:K,alt:"返回"},null,-1)])),G(y(Z),{ref_key:"swiperRef",ref:h,direction:"vertical","slides-per-view":1,"resistance-ratio":.3,threshold:20,"initial-slide":y(d),class:"tiktok-swiper",onSlideChange:S,onSwiper:b},{default:E(()=>[(a(!0),c(R,null,j(u.value,(s,v)=>(a(),f(y(Y),{key:s.src,class:"video-slide"},{default:E(()=>[e("div",at,[v===n.value?(a(),f(Q,{key:0,ref_for:!0,ref:k=>B(v,k),src:s.src,cover:s.cover,shouldPlay:_.value,onRequestPlay:A,onTimeUpdate:O,onPlayed:q},null,8,["src","cover","shouldPlay"])):Math.abs(v-n.value)===1?(a(),c("img",{key:1,src:s.cover,class:"preview-cover"},null,8,it)):T("",!0),e("div",nt,[e("div",lt,[e("span",ct,"@"+l(s.author),1)]),e("div",ut,l(s.title),1),e("div",_t,[(a(!0),c(R,null,j(s.tags,(k,z)=>(a(),c("span",{class:"tag",key:z},"#"+l(k),1))),128))]),e("div",mt,"开通 VIP 观看完整视频 "+l(s.duration),1)]),e("div",dt,[e("div",pt,[e("img",{src:s.avatar,alt:"博主头像",class:"avatar"},null,8,vt),o[1]||(o[1]=e("img",{src:ot,alt:"点赞",class:"action-icon"},null,-1)),e("span",kt,l(s.likes),1)]),e("div",ft,[o[2]||(o[2]=e("img",{src:st,alt:"收藏",class:"action-icon"},null,-1)),e("span",yt,l(s.favorites),1)]),o[3]||(o[3]=e("div",{class:"action-item"},[e("img",{src:W,alt:"分享",class:"action-icon"}),e("span",{class:"count"},"分享")],-1))])])]),_:2},1024))),128))]),_:1},8,["initial-slide"]),u.value[n.value]?(a(),f(X,{key:0,currentTime:Number(p.value),duration:Number(P.value),onSeek:x,onSeeking:N},null,8,["currentTime","duration"])):T("",!0)]))}}),St=et(gt,[["__scopeId","data-v-c23c5956"]]);export{St as default};
