import{_ as ue}from"./back3-q87-H97k.js";import{_ as ve}from"./play4-3PhygbDH.js";import{_ as R}from"./loading-DSJ59oo9.js";import{d as ce,y as de,u as me,r,o as W,n as g,g as ge,X as _e,s as pe,c as u,a as v,b as s,t as n,z as F,x as y,h as S,m as M,l as $,i as d,F as A,e as P,v as q,f as fe,Y as be,k as he,C as Se}from"./index-CKjozqaQ.js";import{a as K,S as we}from"./swiper.min-DhCtGxFp.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ke=""+new URL("../icons/tupian.svg",import.meta.url).href,Ie=""+new URL("../icons/view1.svg",import.meta.url).href,Te=""+new URL("../icons/tupian1.svg",import.meta.url).href,xe={class:"overlay"},Ce={class:"header"},Ne=["src"],Ve={class:"info"},ze={class:"name"},Le={class:"meta-line"},Ue={class:"meta-line"},Fe={class:"intro-container"},Me=["src"],$e={class:"stats"},De={class:"stat"},Be={class:"number"},Oe={class:"stat"},He={class:"number"},Je={class:"stat"},Re={class:"number"},We={class:"pure-white-wrapper"},Ae={class:"tab-wrapper"},Pe={class:"tab-switch"},qe={key:0,class:"tab-line"},Ke={key:0,class:"tab-line"},Ee={class:"swiper-area"},Xe={class:"video-list-content"},Ye={class:"video-list"},je=["onClick"],Ge={class:"video-thumb"},Qe={class:"cover",alt:"视频封面"},Ze={class:"video-overlay"},es={class:"views"},ss={class:"duration"},ts={class:"video-title"},as={key:0,class:"loading-tip"},is={key:1,class:"no-more-tip"},os={class:"image-list-content"},ls={class:"image-grid"},ns=["onClick"],rs={class:"image-thumb"},us={class:"image",alt:"图片封面"},vs={class:"image-overlay"},cs={class:"views"},ds={class:"count"},ms={class:"image-title"},gs={key:0,class:"loading-tip"},_s={key:1,class:"no-more-tip"},ps=ce({__name:"StarDetail",setup(fs){function D(t,e){const{batchSize:l=10,root:o=null}=e,m=be([]),f=r(!1),_=r(!1),w=r(0),U=r(null);let x=null;const H=()=>{if(f.value||_.value)return;f.value=!0;const b=w.value,h=b+l,J=t.value.slice(b,h);J.length>0?(m.value.push(...J),w.value=h,w.value>=t.value.length&&(_.value=!0)):_.value=!0,f.value=!1},re=async b=>{const h=Math.min(b,t.value.length);m.value=t.value.slice(0,h),w.value=h,h>=t.value.length&&(_.value=!0),await g()};return he(t,()=>{m.value=[],w.value=0,_.value=!1,g(()=>H())},{immediate:!0}),W(()=>{g(()=>{U.value&&(x=new IntersectionObserver(b=>{b[0].isIntersecting&&!f.value&&!_.value&&H()},{root:o?o.value:null,threshold:.1}),x.observe(U.value))})}),Se(()=>{x&&x.disconnect()}),{visibleList:m,isLoading:f,noMore:_,sentinel:U,loadUntil:re}}de();const C=me(),a=r("video"),k=r(!1),i=r({}),c=r(null),I=r(null),N=r([]),V=r([]),{visibleList:E,isLoading:X,noMore:Y,sentinel:j,loadUntil:G}=D(N,{batchSize:20,root:c}),{visibleList:Q,isLoading:Z,noMore:ee,sentinel:se,loadUntil:te}=D(V,{batchSize:20,root:c});function z(t){if(typeof t=="string"&&/[wkWk]$/.test(t))return t;const e=Number(t);return isNaN(e)||e===0?"0.0":e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toFixed(1)}function B(t){if(!t)return"0";const e=Number(t);return e>=1e4?(e/1e4).toFixed(2)+"w":e>=1e3?(e/1e3).toFixed(2)+"k":e.toString()}function L(t){return`star-scroll-${t}-${i.value.name}`}function p(t){c.value&&sessionStorage.setItem(L(t),c.value.scrollTop.toString())}function T(t){const e=sessionStorage.getItem(L(t));if(e&&c.value){const l=parseInt(e),o=()=>{if(!c.value)return;c.value.scrollHeight<l+100?requestAnimationFrame(o):c.value.scrollTop=l};o()}}W(()=>{const t=sessionStorage.getItem("star-detail-data");if(t){const e=JSON.parse(t);i.value=e,N.value=e.videos||[],V.value=e.images||[];const l=sessionStorage.getItem("star-detail-tab");(l==="video"||l==="image")&&(a.value=l),g(()=>{I.value?.slideTo(a.value==="video"?0:1,0),T(a.value)})}}),ge(async()=>{const t=sessionStorage.getItem("star-detail-tab");(t==="video"||t==="image")&&(a.value=t),await g(),I.value?.slideTo(a.value==="video"?0:1,0);const e=L(a.value),l=sessionStorage.getItem(e);l&&+l>100&&(a.value==="image"?await te(V.value.length):await G(N.value.length)),await g(),T(a.value)});function O(t){const e=a.value;p(e),a.value=t,sessionStorage.setItem("star-detail-tab",t),I.value?.slideTo(t==="video"?0:1),g(()=>T(t))}function ae(t){I.value=t}function ie(t){const e=a.value,l=t.activeIndex===0?"video":"image";e!==l&&p(e),a.value=l,sessionStorage.setItem("star-detail-tab",a.value),g(()=>T(a.value))}function oe(t){p(a.value),sessionStorage.setItem("return-from","star"),sessionStorage.setItem("star-detail-data",JSON.stringify(i.value)),C.push({name:"PlayPage",query:{src:t.src,cover:t.cover,title:t.title,tag:t.tag||""}})}function le(t){p(a.value),sessionStorage.setItem("return-from","star"),sessionStorage.setItem("last-star",JSON.stringify(i.value)),sessionStorage.setItem("star-detail-tab","image");const e={star:{id:i.value.id,name:i.value.name,avatar:i.value.avatar},album:t};C.push({name:"StarImageDetail",params:{data:encodeURIComponent(JSON.stringify(e))}})}function ne(){p(a.value),sessionStorage.removeItem("star-detail-scrollTop"),C.back()}return _e(()=>{p(a.value),sessionStorage.removeItem("star-detail-scrollTop")}),(t,e)=>{const l=pe("lazy");return v(),u("div",{class:"detail-wrapper",ref_key:"detailWrapper",ref:c,style:fe({backgroundImage:"url("+i.value.avatar+")"})},[s("div",{class:"back-fixed",onClick:ne},e[3]||(e[3]=[s("img",{src:ue,alt:"返回"},null,-1)])),s("div",xe,[s("div",Ce,[s("img",{src:i.value.avatar,class:"avatar",alt:"明星头像"},null,8,Ne),s("div",Ve,[s("h2",ze,n(i.value.name),1),s("div",Le,[s("span",null,"国家："+n(i.value.country||"未知"),1),s("span",null,"身高："+n(i.value.height||"未知"),1),s("span",null,"生日："+n(i.value.birthday||"未知"),1)]),s("div",Ue,[s("span",null,"罩杯："+n(i.value.cup||"未知"),1),s("span",null,"影片数量："+n(i.value.videos?.length||0),1),s("span",null,"三围："+n(i.value.size||"未知"),1)]),s("div",Fe,[e[4]||(e[4]=s("span",{class:"intro-label"},"人物简介：",-1)),s("span",{class:F(["intro-text",{folded:!k.value}])},n(i.value.intro||"Hi，我是"+i.value.name+"，欢迎关注我！"),3),s("span",{class:"toggle",onClick:e[0]||(e[0]=o=>k.value=!k.value)},[s("img",{src:k.value?"/icons/up.svg":"/icons/down.svg",alt:"展开/收起简介"},null,8,Me)])])])]),s("div",$e,[s("div",De,[s("div",Be,n(z(i.value.visits)),1),e[5]||(e[5]=s("div",{class:"label"},"访客",-1))]),s("div",Oe,[s("div",He,n(z(i.value.likes)),1),e[6]||(e[6]=s("div",{class:"label"},"点赞",-1))]),s("div",Je,[s("div",Re,n(z(i.value.fans)),1),e[7]||(e[7]=s("div",{class:"label"},"粉丝",-1))])])]),s("div",We,[s("div",Ae,[e[10]||(e[10]=s("div",{class:"tab-indicator-bar"},null,-1)),s("div",Pe,[s("div",{class:F(["tab",{active:a.value==="video"}]),onClick:e[1]||(e[1]=o=>O("video"))},[e[8]||(e[8]=y(" 视频 ")),a.value==="video"?(v(),u("div",qe)):S("",!0)],2),s("div",{class:F(["tab",{active:a.value==="image"}]),onClick:e[2]||(e[2]=o=>O("image"))},[e[9]||(e[9]=y(" 图片 ")),a.value==="image"?(v(),u("div",Ke)):S("",!0)],2)])]),s("div",Ee,[M(d(we),{"slides-per-view":1,"space-between":0,onSwiper:ae,onSlideChange:ie,class:"mySwiper",allowTouchMove:!0},{default:$(()=>[M(d(K),null,{default:$(()=>[s("div",Xe,[s("div",Ye,[(v(!0),u(A,null,P(d(E),o=>(v(),u("div",{class:"video-card",key:o.title,onClick:m=>oe(o)},[s("div",Ge,[q(s("img",Qe,null,512),[[l,o.cover]]),s("div",Ze,[s("span",es,[e[11]||(e[11]=s("img",{src:ve,class:"play-icon"},null,-1)),y(" "+n(B(o.views)),1)]),s("span",ss,n(o.duration),1)])]),s("div",ts,n(o.title),1),e[12]||(e[12]=s("div",{class:"tag"},"AV",-1))],8,je))),128))]),d(X)?(v(),u("div",as,e[13]||(e[13]=[s("img",{src:R,class:"loading-icon"},null,-1),s("span",null,"客官别走，妾身马上就好~",-1)]))):S("",!0),d(Y)?(v(),u("div",is," 客官，妾身被你弄高潮了，扛不住了~ ")):S("",!0),s("div",{ref_key:"videoSentinel",ref:j,class:"sentinel"},null,512)])]),_:1}),M(d(K),null,{default:$(()=>[s("div",os,[s("div",ls,[(v(!0),u(A,null,P(d(Q),(o,m)=>(v(),u("div",{class:"image-card",key:m,onClick:f=>le(o)},[s("div",rs,[q(s("img",us,null,512),[[l,o.src]]),e[16]||(e[16]=s("div",{class:"corner-label"},[s("img",{src:ke,class:"corner-icon"}),s("span",null,"图片")],-1)),s("div",vs,[s("span",cs,[e[14]||(e[14]=s("img",{src:Ie,class:"play-icon"},null,-1)),y(" "+n(B(o.views)),1)]),s("span",ds,[e[15]||(e[15]=s("img",{src:Te,class:"play-icon"},null,-1)),y(" "+n(o.count),1)])])]),s("div",ms,n(o.title),1)],8,ns))),128))]),d(Z)?(v(),u("div",gs,e[17]||(e[17]=[s("img",{src:R,class:"loading-icon"},null,-1),s("span",null,"客官别走，妾身马上就好~",-1)]))):S("",!0),d(ee)?(v(),u("div",_s," 客官，妾身被你弄高潮了，扛不住了~ ")):S("",!0),s("div",{ref_key:"imageSentinel",ref:se,class:"sentinel"},null,512)])]),_:1})]),_:1})])])],4)}}}),Is=ye(ps,[["__scopeId","data-v-cb3bfd6d"]]);export{Is as default};
