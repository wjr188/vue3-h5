import{d as R,y as B,u as F,q as v,r as o,o as N,s as D,c as a,a as l,b as s,h as p,t as c,F as L,e as U,x as C,w as V,z as $,v as E}from"./index-CKjozqaQ.js";import{_ as q}from"./back-DXvGtdGP.js";import{_ as J}from"./loading-DSJ59oo9.js";import{_ as O}from"./share2-DEdzc1xC.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A=""+new URL("../icons/like1.svg",import.meta.url).href,G=""+new URL("../icons/star.svg",import.meta.url).href,K={class:"full-image-viewer"},Q={class:"top-bar"},W={class:"title"},X={class:"full-image"},Y={key:0,class:"lock-overlay"},Z={key:0,class:"loading-tip"},ss={key:1,class:"end-tip"},es={class:"bottom-bar"},ts={class:"icon-btn"},os={class:"icon-btn"},as={class:"index-text"},ls=R({__name:"FullImageViewer",setup(ns){const w=B(),g=F(),u=v(()=>{try{return w.params.data?JSON.parse(decodeURIComponent(w.params.data)):{album:{images:[]}}}catch(t){return console.error("Error parsing data:",t),{album:{images:[]}}}}),i=v(()=>u.value.album||{images:[]}),M=v(()=>u.value.likes||0),S=v(()=>u.value.favs||0),y=o(null),f=o(!1),r=o(!1),_=o(!1),P=Math.ceil(window.innerHeight/130*3/2),b=o(0),I=o([]),k=o(u.value.initialIndex||0);function h(){r.value||_.value||(r.value=!0,setTimeout(()=>{const t=i.value.images.length,e=b.value+P;I.value=i.value.images.slice(0,Math.min(e,t)),b.value=e,b.value>=t&&(_.value=!0),r.value=!1},800))}function T(){const t=y.value;if(!t)return;t.scrollTop+t.clientHeight+100>=t.scrollHeight&&h();const m=i.value.images.length;if(m>0){const d=t.scrollHeight/m,n=Math.floor(t.scrollTop/d);k.value!==n&&(k.value=n)}}function z(){g.back()}function H(){g.push({name:"Vip"})}function x(){g.push({name:"PromotionShare"})}return N(()=>{h(),h()}),(t,e)=>{const m=D("lazy");return l(),a("div",K,[s("div",Q,[s("img",{src:q,class:"back-icon",onClick:z}),s("div",W,c(i.value.title),1)]),s("div",{class:"image-swiper",onScrollPassive:T,ref_key:"scrollContainer",ref:y},[(l(!0),a(L,null,U(I.value,(d,n)=>(l(),a("div",{key:n,class:$(["image-wrapper",{locked:n>1}])},[E(s("img",X,null,512),[[m,d]]),n>1?(l(),a("div",Y,[s("div",{class:"vip-button",onClick:e[0]||(e[0]=V(is=>f.value=!0,["stop"]))},"开通VIP观看完整图集")])):p("",!0)],2))),128)),r.value?(l(),a("div",Z,e[2]||(e[2]=[s("img",{src:J,class:"loading-icon"},null,-1),C(" 客官别走，妾身马上就好~ ")]))):p("",!0),!r.value&&_.value?(l(),a("div",ss," 客官，妾身被你弄高潮了，扛不住了 ~ ")):p("",!0)],544),f.value?(l(),a("div",{key:0,class:"modal-mask",onClick:e[1]||(e[1]=V(d=>f.value=!1,["self"]))},[s("div",{class:"modal-box"},[e[3]||(e[3]=s("div",{class:"modal-title"},"温馨提示",-1)),e[4]||(e[4]=s("div",{class:"modal-text"},[C("开通VIP可无限观看色图"),s("br"),C("邀请好友注册立刻送3天VIP")],-1)),s("div",{class:"modal-actions"},[s("button",{class:"btn orange",onClick:x},"邀请好友"),s("button",{class:"btn red",onClick:H},"开通会员")])])])):p("",!0),s("div",es,[s("div",ts,[e[5]||(e[5]=s("img",{src:A},null,-1)),s("span",null,c(M.value),1)]),s("div",os,[e[6]||(e[6]=s("img",{src:G},null,-1)),s("span",null,c(S.value),1)]),s("div",{class:"icon-btn",onClick:x},e[7]||(e[7]=[s("img",{src:O},null,-1),s("span",null,"分享",-1)])),s("div",as,c(k.value+1)+"/"+c(i.value.images.length),1)])])}}}),vs=j(ls,[["__scopeId","data-v-95a26e15"]]);export{vs as default};
